/*
\| LegitSoulja
\| All Rights Reserved
\| Documentation: https://github.com/LegitSoulja/SimpleWorker
*/
(function(){var e=this.URL.createObjectURL(new Blob(["(",function(){self.onmessage=function(a){return self.postMessage({index:a.data.index,data:eval("(function(func){return func;})("+a.data.func+")").apply(null,a.data.args)})}}.toString(),")()"],{type:"application/javascript"})),d=function(){this.workers={}};d.prototype.prepare=function(a){var c=[];1<arguments.length&&Array.prototype.push.apply(c,arguments);c.shift();var b=Object.keys(this.workers).length;this.workers["!"+b]={worker:new Worker(e),func:a,
args:c,loads:[],init:function(a){var c=this.loads.length;this.loads.push(a);var b=this;this.worker.onmessage=function(a){"undefined"!=typeof a&&"undefined"!=typeof a.data.index&&"undefined"!=typeof b.loads[a.data.index]&&(b.loads[a.data.index](a.data.data),b.loads[a.data.index]=null)};this.worker.postMessage({func:this.func.toString(),args:this.args,index:c})},terminate:function(){this.worker.terminate()}};return b};d.prototype.shiftN=function(a,c){for(var b=0;b<c;b++)a.shift();return a};d.prototype.restore=
function(a,c){a="!"+a;if("undefined"!=typeof this.workers[a]){null!=c&&(this.workers[a].func=c);var b=[];2<arguments.length&&(Array.prototype.push.apply(b,arguments),b=this.shiftN(b,2),this.workers[a].args=b)}else throw Error("Unable to find worker with pid ID #"+a);};d.prototype.execute=function(a,c,b){b=void 0===b?!1:b;a="!"+a;var d=this;if("undefined"!=typeof this.workers[a])if("function"==typeof c)this.workers[a].init(function(e){c(e);b||(d.workers[a].terminate(),delete d.workers[a])});else throw Error("Execute requires a callback function as the second argument.");
else throw Error("Unable to find worker with pid ID #"+a);};d.prototype.kill=function(a){a="!"+a;"undefined"!=typeof this.workers[a]&&(this.workers[a].terminate(),delete this.workers[a])};d.prototype.killAll=function(){var a=Object.keys(this.workers),c;for(c in a)this.workers[a[c]].terminate(),delete this.workers[a[c]]};d.prototype.newInstance=function(){return new d};this.SimpleWorker=d})(this);
